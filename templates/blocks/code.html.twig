<div data-controller="content-block" data-content-block-id-value="{{ block.id }}" class="group/code relative my-6">
    {# Language Selector #}
    <div
        class="absolute -top-10 left-0 flex items-center gap-2 p-1 bg-white dark:bg-gray-800 rounded-lg border border-gray-100 dark:border-white/10 shadow-lg opacity-0 group-focus-within/code:opacity-100 transition-opacity z-20">
        <select data-action="live#action focus->content-block#sync" data-live-action-param="updateBlockDataProperty"
            data-live-id-param="{{ block.id }}" data-live-property-param="language"
            class="bg-transparent border-none text-xs font-bold text-gray-500 hover:text-indigo-600 focus:ring-0 cursor-pointer uppercase tracking-wider">
            {% for lang in ['html', 'javascript', 'php', 'python', 'css', 'sql', 'bash'] %}
            <option value="{{ lang }}" {{ block.data.language==lang ? 'selected' : '' }}>{{ lang }}</option>
            {% endfor %}
        </select>
    </div>

    <div
        class="not-prose relative bg-gray-900 rounded-xl overflow-hidden group-hover:ring-1 ring-indigo-500/30 transition-all">
        <div class="flex items-center justify-between px-4 py-2 bg-gray-800/50 border-b border-white/5">
            <div class="flex gap-1.5">
                <div class="w-3 h-3 rounded-full bg-red-500/20 border border-red-500/20"></div>
                <div class="w-3 h-3 rounded-full bg-yellow-500/20 border border-yellow-500/20"></div>
                <div class="w-3 h-3 rounded-full bg-green-500/20 border border-green-500/20"></div>
            </div>
            <span class="text-[10px] font-bold text-gray-500 uppercase tracking-widest">{{ block.data.language }}</span>
        </div>
        <pre class="p-6 text-sm text-indigo-100/90 leading-relaxed overflow-x-auto"><code 
            contenteditable="true"
            data-action="input->content-block#sync"
            data-content-block-target="editor"
            data-property="code"
            class="outline-none block w-full"
            placeholder="Paste your code here..."
        >{{ block.data.code|raw }}</code></pre>
    </div>
</div>